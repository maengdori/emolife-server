<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>게시판</title>
</head>
<body>
<h2>게시판</h2>
<div id="posts"></div>

<script>
const SERVER_URL = 'https://emolife-server-production.up.railway.app';

// URL 쿼리에서 board 추출
const urlParams = new URLSearchParams(window.location.search);
const board = urlParams.get('board') || 'default';

// 게시글 불러오기
async function loadPosts() {
    try {
        const res = await fetch(`${SERVER_URL}/api/posts?board=${board}`, { credentials: 'include' });
        if (!res.ok) throw new Error('게시물을 불러오지 못했습니다.');
        const posts = await res.json();

        let html = '';
        posts.forEach(p => {
            html += `<div style="border:1px solid #ccc; margin:10px; padding:10px;">
                        <p><b>ID:</b> ${p.id}</p>
                        <p>${p.text}</p>
                     </div>`;
        });
        document.getElementById('posts').innerHTML = html;
    } catch (err) {
        document.getElementById('posts').innerHTML = `<p style="color:red;">${err.message}</p>`;
    }
}

loadPosts();
</script>
</body>
</html>
