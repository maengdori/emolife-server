<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Admin Dashboard</title>
</head>
<body>
<h2>관리자 대시보드</h2>
<div id="posts"></div>

<script>
async function loadPosts() {
    const res = await fetch('https://[Railway서버주소]/posts', {
        credentials: 'include'
    });
    const posts = await res.json();
    let html = "";
    posts.forEach(p => {
        html += `
        <div style="border:1px solid #ccc; margin:10px; padding:10px;">
            <p><b>ID:</b> ${p.id}</p>
            <p>${p.text}</p>
            <button onclick="deletePost('${p.id}')">삭제</button>
        </div>`;
    });
    document.getElementById('posts').innerHTML = html;
}

async function deletePost(id) {
    const res = await fetch(`https://[Railway서버주소]/posts/${id}`, {
        method: "DELETE",
        credentials: 'include'
    });
    const data = await res.json();
    if (data.success) {
        alert("삭제 완료");
        loadPosts();
    }
}

loadPosts();
</script>
</body>
</html>
